{
  "hash": "85250afda6503a27f674ba3e6bb3d797",
  "result": {
    "markdown": "---\ntitle: \"The functional distribution of income\"\nauthor: \"Matthias Schnetzer\"\ndate: \"2023-04-22\"\noutput: html_document\n---\n\n\n\n\n### Wage share in Austria\n\nThe wage share in **Austria** has been decreasing since the 1970s. In the wake of the global financial crisis that erupted in 2008, the wage share increased due to a sharp decline in profits. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](07_income_files/figure-html/austria-1.png){width=960}\n:::\n:::\n\n\nWe can improve the figure by editing the scales of the axes. We add percentage symbols to the y-axis and we remove the white space on the x-axis.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](07_income_files/figure-html/autwithscales-1.png){width=960}\n:::\n:::\n\n\n### Wage shares in selected international countries\n\nWe can plot the wage shares for selected countries and emphasize the data for Austria with `gghighlight`. We can also improve the axis labels with scales.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](07_income_files/figure-html/wageshares-1.png){width=960}\n:::\n:::\n\n\n### Code for the figure\n\nHere is the **clean code** for the figure on the functional distribution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwsdata |>\n  ggplot(aes(x = year, y = value, group = country, color = country)) +\n  geom_line(linewidth = 1.4) +\n  gghighlight(country == \"Austria\", \n              unhighlighted_params = list(color = \"gray80\", alpha = 0.5, linewidth = 0.9),\n              line_label_type = \"label_path\", label_key = country, use_group_by = F,\n              label_params = list(size = 3, hjust = 0.94)) +\n  geom_text_repel(data = wsdata |> slice_max(year, n=1, by=country) |> filter(!country == \"Austria\"), \n                  aes(x = year, y = value, label = country), \n                  xlim = c(as.Date(\"2023-01-01\"), NA),\n                  size = 2.5, color = \"gray70\", hjust = 0, direction = \"y\",\n                  min.segment.length = unit(2, \"pt\"), segment.size = 0.1) +\n  scale_color_manual(name = NULL, values = met.brewer(\"Austria\"),) +\n  scale_x_date(breaks= seq(min(wsdata$year),max(wsdata$year), by = \"10 years\"), date_labels = \"%Y\",\n               limits = c(as.Date(\"1960-01-01\"), as.Date(\"2026-01-01\"))) +\n  scale_y_continuous(limits = c(55,80), labels = scales::percent_format(scale = 1)) +\n  labs(y = NULL, x = NULL, caption = \"Data: Ameco.\",\n       title = \"Wage share in selected countries\", subtitle = \"Wage share in % of GDP at factor cost\") +\n  theme_minimal() + \n  theme(panel.grid.minor = element_blank(),\n        plot.title = element_text(size = 14),\n        plot.caption = element_text(size = 10, margin = margin(t = 1, unit = \"lines\")),\n        axis.title = element_text(size = 12),\n        axis.text = element_text(size = 10))\n```\n:::",
    "supporting": [
      "07_income_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}